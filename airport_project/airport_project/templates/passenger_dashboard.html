{% extends "base.html" %}
{% block title %}Passenger Dashboard{% endblock %}
{% block content %}
<h2>Your Tickets</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Booking Ref</th>
      <th>Flight Number</th>
      <th>Fare Class</th>
      <th>Price</th>
      <th>Status</th>
      <th>Departure</th>
      <th>Arrival</th>
    </tr>
  </thead>
  <tbody>
    {% for t in tickets %}
      <tr>
        <td>{{ t.BookingReference }}</td>
        <td>{{ t.FlightNumber }}</td>
        <td>{{ t.FareClass }}</td>
        <td>{{ t.Price }}</td>
        <td>{{ t.Status }}</td>
        <td>{{ t.DepartureTime }}</td>
        <td>{{ t.ArrivalTime }}</td>
      </tr>
    {% else %}
      <tr><td colspan="7" class="text-center">No tickets found</td></tr>
    {% endfor %}
  </tbody>
</table>
<hr />
<h2>Book a New Ticket</h2>
<form action="{{ url_for('passenger_book_ticket') }}" method="POST" class="row g-3 bg-white border rounded p-3 shadow-sm">
  <div class="col-md-4">
    <label class="form-label">Flight</label>
    <select name="flight_id" class="form-select" required>
      <option value="" disabled selected>Select a flight</option>
      {% for f in flights %}
        <option value="{{ f.FlightID }}">{{ f.FlightNumber }} ({{ f.Departure }} â†’ {{ f.Arrival }})</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-4">
    <label class="form-label">Fare Class</label>
    <select name="fare_class" class="form-select" required>
      <option>Economy</option>
      <option>Business</option>
      <option>First</option>
    </select>
  </div>
  <div class="col-md-4 d-flex align-items-end">
    <button type="submit" class="btn btn-success w-100">Book Ticket</button>
  </div>
</form>
{% endblock %}

